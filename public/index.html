<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Página de Perfil</title>
  <link rel="stylesheet" href="stylePerfil.css">
  <link href="https://fonts.cdnfonts.com/css/sf-theramin-gothic" rel="stylesheet">
</head>

<body>

  <nav class="sidebar">
    <a href="index.html"> <img src="imagens/perfil.png" alt="Perfil" class="icon"></a>
    <a href="batalha.html"> <img src="imagens/battleEscuro.png" alt="Battle" class="icon"></a>
    <a href="criacao.html"> <img src="imagens/construir.png" alt="Construir" class="icon"></a>
    <a href="campeonato.html"> <img src="imagens/torneio.png" alt="Torneio" class="icon"></a>
  </nav>

  <div class="perfilConteudo">
    <div class="logoContainer">
      <img src="imagens/bladerX.png" alt="BladerX Logo" class="logo">
    </div>

    <div class="cima">
      <img src="imagens/fotoPerfil.png" alt="Foto de Perfil" class="fotoPerfil">
    </div>

    <div class="baixo" id="baixo">
      <div class="iconContainer">
        <img src="imagens/colecao.png" alt="Coleção" class="iconPerfil" onclick="colecao()">
        <p class="iconLegenda">Coleção</p>
      </div>

      <div class="iconContainer">
        <img src="imagens/adicionar.png" alt="Adicionar" class="iconPerfil" onclick="adicionar()">
        <p class="iconLegenda">Adicionar</p>
      </div>

      <div class="iconContainer">
        <img src="imagens/historico.png" alt="Histórico" class="iconPerfil" onclick="historico()">
        <p class="iconLegenda">Histórico</p>
      </div>

    </div>

    <div class="superiorEsquerdo" id="superiorEsquerdo">
      <div class="iconContainer">
        <img src="imagens/colecao.png" alt="Coleção" class="iconSuperior" onclick="colecao()">
        <p class="iconLegenda">Coleção</p>
      </div>

    <div class="popup" id="popup">
      <div class="pecasCombo" id="pecasCombo">
      <span class="combos" onclick="combos()">Combos</span>
      <span class="pecas" onclick="carregarPecas()">Peças</span>
    </div>
    <div class='listaPecas' id="listaPecas">
      <h3>Gatinko</h3>
      <div id="gatinko"></div>
    
      <h3>Layer</h3>
      <div id="layer"></div>
    
      <h3>Layer Weight</h3>
      <div id="layerWeight"></div>
    
      <h3>Disk</h3>
      <div id="disk"></div>
    
      <h3>Driver</h3>
      <div id="driver"></div>
    </div>
    </div>
    
      
      <div class="iconContainer">
        <img src="imagens/adicionar.png" alt="Adicionar" class="iconSuperior" onclick="adicionar()">
        <p class="iconLegenda">Adicionar</p>
      </div>

      <div class="iconContainer">
        <img src="imagens/historico.png" alt="Histórico" class="iconSuperior" onclick="historico()">
        <p class="iconLegenda">Histórico</p>
      </div>

      
    </div>
</body>

</html>

<script>

  superiorEsquerdo.style.display = 'none'
  popup.style.display = 'none'
  listaPecas.style.display = 'none'

  var imagensPecas = { 
  'Achilles': 'Gatinko/GatinkoChipAchilles.webp', // JSON para colocar um link para cada nome de peça
  'Gou': 'layerWeight/LayerWeightGou.webp',
  'Ace': 'layer/LayerBaseAce.webp',
  'Around': 'disk/DiskAround.webp',
  'Charge': 'driver/DriverCharge.webp',
  'Ashura': 'gatinko/GatinkoChipAshura.webp',
  'Metsu': 'layerWeight/LayerWeightRetsu.webp',
  'Bushin': 'layer/LayerBaseBushin.webp',
  'Ratchet': 'disk/DiskRatchet.webp',
  'Keep': 'driver/DriverKeep.webp',
  'Generate': 'driver/DriverGenerate.webp',
  'Erase': 'layer/LayerBaseErase.webp'
}


  function colecao() {
    alert('colecao')
    superiorEsquerdo.style.display = 'flex'
    popup.style.display = 'block'
    baixo.style.display = 'none'

  }

  function carregarPecas() {
  pecasCombo.style.display = 'none';
  listaPecas.style.display = 'block';

  fetch("/pecas/listar") // Rota que retorna os dados da tabela 'pecas'
    .then(function (response) {
      if (response.ok) {
        return response.json();
      } else {
        console.error("Erro ao buscar peças");
        return [];
      }
    })
    .then(function (pecas) {
      listaPecas.innerHTML = ""; // Limpa a lista antes de carregar

      // Obter tipos únicos de peças
      var tipos = [];
      for (var i = 0; i < pecas.length; i++) {
        if (tipos.indexOf(pecas[i].tipo) == -1) {
          tipos.push(pecas[i].tipo);
        }
      }

      // Criar seções para cada tipo
      for (var i = 0; i < tipos.length; i++) {
        var tipo = tipos[i];
        listaPecas.innerHTML +=
          '<div class="tipoPecas">' +
          '<h3>' + tipo + '</h3>' +
          '<div id="tipo-' + tipo + '" class="pecasTipo"></div>' +
          '</div>';
      }

      // Preencher cada tipo com as peças correspondentes
      for (var i = 0; i < pecas.length; i++) {
        var peca = pecas[i];
        var nomePeca = peca.nome; // Nome da peça
        var tipoPeca = peca.tipo; // Tipo da peça
        var abraviacao = peca.abraviacao; // Abreviação (opcional)
        var imagemCaminho = imagensPecas[nomePeca]; // Caminho da imagem baseado no nome

        // Criando o HTML da peça
        var imgPecas =
          '<div class="imgBey">' +
          '<img src="beyblades/' + imagemCaminho + '" style="width: 50px;" />' +
          '<p>' + nomePeca + ' (' + (abraviacao || "N/A") + ')</p>' +
          '</div>';

        // Adicionando à div correspondente ao tipo
        var tipoContainer = document.getElementById("tipo-" + tipoPeca);
        if (tipoContainer) {
          tipoContainer.innerHTML += imgPecas;
        }
      }
    })
    .catch(function (erro) {
      console.error("Erro na requisição:", erro);
    });
}


  function adicionar() {
    alert('adicionar')
    superiorEsquerdo.style.display = 'flex'
    baixo.style.display = 'none'
    popup.style.display = 'none'

  }

  function historico() {
    alert('historico')
    superiorEsquerdo.style.display = 'flex'
    baixo.style.display = 'none'
    baixo.style.display = 'none'

  }




</script>


